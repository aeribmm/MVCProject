<div class="page-header">
    <h1>Moje Projekty</h1>
    <div class="filter-section">
        <form method="GET" action="/projects" class="filter-form">
            <select name="status" id="status" onchange="this.form.submit()" class="modern-select">
                <option value="all" <%= statusFilter === 'all' ? 'selected' : '' %>>Wszystkie</option>
                <option value="Planowany" <%= statusFilter === 'Planowany' ? 'selected' : '' %>>Planowane</option>
                <option value="Zako≈Ñczony" <%= statusFilter === 'Zako≈Ñczony' ? 'selected' : '' %>>Zako≈Ñczone</option>
            </select>
        </form>
    </div>
</div>

<% if (projects.length === 0) { %>
    <div class="empty-state">
        <div class="empty-icon">üìã</div>
        <h3>Brak projekt√≥w</h3>
        <a href="/projects/new" class="btn btn-primary">Utw√≥rz pierwszy projekt</a>
    </div>
<% } else if (projects.length === 1) { %>
    <div class="projects-container">
        <div class="projects-grid">
            <% projects.forEach(project => { %>
                <div class="project-card first-project">
                    <div class="project-badge">‚≠ê Pierwszy projekt</div>
                    <div class="project-header-card">
                        <h3><a href="/projects/<%= project._id %>"><%= project.name %></a></h3>
                        <span class="status status-<%= project.status.toLowerCase().replace(' ', '-') %>">
                            <%= project.status %>
                        </span>
                    </div>
                    <p class="project-description"><%= project.description %></p>
                    <div class="project-footer">
                        <div class="project-stats">
                            <span><i class="icon">üë•</i> <%= project.participants.length %></span>
                            <span><i class="icon">üìä</i> <%= project.progress.length %></span>
                        </div>
                        <div class="project-deadline">
                            <%= new Date(project.deadline).toLocaleDateString('pl-PL') %>
                        </div>
                    </div>
                </div>
            <% }) %>
        </div>

        <div class="achievement-card">
            <div class="achievement-content">
                <span class="achievement-icon">üéØ</span>
                <div class="achievement-text">
                    <h4>≈öwietny start!</h4>
                    <p>Czas na kolejny projekt</p>
                </div>
                <a href="/projects/new" class="btn btn-achievement">Stw√≥rz kolejny</a>
            </div>
        </div>
    </div>
<% } else { %>
    <div class="projects-container">
        <div class="projects-grid">
            <% projects.forEach(project => { %>
                <div class="project-card">
                    <div class="project-header-card">
                        <h3><a href="/projects/<%= project._id %>"><%= project.name %></a></h3>
                        <span class="status status-<%= project.status.toLowerCase().replace(' ', '-') %>">
                            <%= project.status %>
                        </span>
                    </div>
                    <p class="project-description"><%= project.description %></p>
                    <div class="project-footer">
                        <div class="project-stats">
                            <span><i class="icon">üë•</i> <%= project.participants.length %></span>
                            <span><i class="icon">üìä</i> <%= project.progress.length %></span>
                            <% if (project.status === 'Zako≈Ñczony') { %>
                                <span><i class="icon">‚úÖ</i> Uko≈Ñczony</span>
                            <% } %>
                        </div>
                        <div class="project-deadline">
                            <%= new Date(project.deadline).toLocaleDateString('pl-PL') %>
                        </div>
                    </div>
                </div>
            <% }) %>
        </div>
    </div>
<% } %>